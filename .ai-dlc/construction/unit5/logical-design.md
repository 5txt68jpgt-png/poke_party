# Logical Design - Unit 5: ãƒ‘ãƒ¼ãƒ†ã‚£ç”Ÿæˆæ”¹å–„

## å¤‰æ›´å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«

```
src/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ openai/
â”‚   â”‚   â””â”€â”€ client.ts           # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ã€ãŠã¾ã‹ã›ç”Ÿæˆè¿½åŠ 
â”‚   â””â”€â”€ party/
â”‚       â””â”€â”€ types.ts            # GenerationModeè¿½åŠ 
â”œâ”€â”€ app/
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ generate-party/
â”‚           â””â”€â”€ route.ts        # ãŠã¾ã‹ã›ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
â””â”€â”€ components/
    â””â”€â”€ party-generator.tsx     # ãŠã¾ã‹ã›ãƒœã‚¿ãƒ³è¿½åŠ 
```

---

## å‹å®šç¾©å¤‰æ›´

### party/types.ts

```typescript
// ç”Ÿæˆãƒ¢ãƒ¼ãƒ‰ï¼ˆæ–°è¦è¿½åŠ ï¼‰
export type GenerationMode = "theme" | "random";

// ç”Ÿæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆæ‹¡å¼µï¼‰
export interface GenerationRequest {
  theme?: string;  // ãŠã¾ã‹ã›æ™‚ã¯undefined
  count: number;
  mode: GenerationMode;
}
```

---

## AIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå¤‰æ›´

### openai/client.ts

```typescript
// æ—¢å­˜é–¢æ•°ã®æ”¹å–„
export async function generatePokemonNames(
  theme: string,
  count: number
): Promise<AIResponse>

// æ–°è¦é–¢æ•°
export async function generateRandomParty(
  count: number
): Promise<RandomPartyResponse>

interface RandomPartyResponse {
  theme: string;
  pokemon: string[];
}
```

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå®šæ•°

```typescript
const THEME_PROMPT = `ã‚ãªãŸã¯ãƒã‚±ãƒ¢ãƒ³ã®å°‚é–€å®¶ã§ã™...ï¼ˆæ”¹å–„ç‰ˆï¼‰`;
const RANDOM_PROMPT = `ã‚ãªãŸã¯ãƒã‚±ãƒ¢ãƒ³ã®å°‚é–€å®¶ã§ã™...ï¼ˆãŠã¾ã‹ã›ç”¨ï¼‰`;
```

---

## API Routeå¤‰æ›´

### route.ts

```typescript
export async function POST(request: Request) {
  const body = await request.json();

  if (body.mode === "random") {
    // ãŠã¾ã‹ã›ãƒ¢ãƒ¼ãƒ‰
    const aiResponse = await generateRandomParty(body.count);
    // ... ãƒ‘ãƒ¼ãƒ†ã‚£ç”Ÿæˆ
    return { party: { theme: aiResponse.theme, members } };
  } else {
    // ãƒ†ãƒ¼ãƒæŒ‡å®šãƒ¢ãƒ¼ãƒ‰ï¼ˆæ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ + æ”¹å–„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰
    const aiResponse = await generatePokemonNames(body.theme, body.count);
    // ...
  }
}
```

---

## UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¤‰æ›´

### party-generator.tsx

**ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå¤‰æ›´**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   ğŸ² ãŠã¾ã‹ã›ç”Ÿæˆ              â”‚ â”‚  â† æ–°è¦ãƒœã‚¿ãƒ³
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚        â”€â”€â”€â”€â”€ ã¾ãŸã¯ â”€â”€â”€â”€â”€          â”‚  â† åŒºåˆ‡ã‚Šç·š
â”‚                                     â”‚
â”‚ ãƒ†ãƒ¼ãƒã‚’å…¥åŠ›                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ä¾‹ï¼šã‹ã‚ã„ã„ãƒã‚±ãƒ¢ãƒ³            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [ãŠã™ã™ã‚ãƒ†ãƒ¼ãƒ...]                  â”‚
â”‚                                     â”‚
â”‚ ãƒã‚±ãƒ¢ãƒ³æ•°: [3åŒ¹ â–¼]                 â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚        ãƒ‘ãƒ¼ãƒ†ã‚£ç”Ÿæˆ             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ…‹ç®¡ç†**:

```typescript
const handleRandomGenerate = async () => {
  setState({ status: "loading" });
  const response = await fetch("/api/generate-party", {
    method: "POST",
    body: JSON.stringify({ mode: "random", count }),
  });
  // ...
};

const handleThemeGenerate = async () => {
  // æ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆmode: "theme"ã‚’è¿½åŠ ï¼‰
};
```

---

## Bolt ã‚¿ã‚¹ã‚¯å¯¾å¿œ

| Bolt | ã‚¿ã‚¹ã‚¯ | å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ« |
|------|--------|--------------|
| 5-1 | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ | `src/lib/openai/client.ts` |
| 5-2 | ãŠã¾ã‹ã›API | `src/lib/openai/client.ts`, `route.ts` |
| 5-3 | UIæ›´æ–° | `src/components/party-generator.tsx` |
| 5-4 | ãƒ†ã‚¹ãƒˆ | æ‰‹å‹•ãƒ†ã‚¹ãƒˆ |
| 5-5 | ãƒ‡ãƒ—ãƒ­ã‚¤ | Vercel |

---

## ãƒ†ã‚¹ãƒˆè¦³ç‚¹

### ãƒ©ãƒ³ãƒ€ãƒ æ€§ãƒ†ã‚¹ãƒˆ
- åŒã˜ãƒ†ãƒ¼ãƒã§5å›ç”Ÿæˆã—ã€ãƒã‚±ãƒ¢ãƒ³ã®é‡è¤‡ç‡ã‚’ç¢ºèª
- ç›®æ¨™: 60%ä»¥ä¸ŠãŒç•°ãªã‚‹ãƒã‚±ãƒ¢ãƒ³

### ãƒ†ãƒ¼ãƒé©åˆæ€§ãƒ†ã‚¹ãƒˆ
- ç”Ÿæˆã•ã‚ŒãŸãƒã‚±ãƒ¢ãƒ³ãŒãƒ†ãƒ¼ãƒã«åˆã£ã¦ã„ã‚‹ã‹ç¢ºèª
- ãŠã¾ã‹ã›ç”Ÿæˆã®ãƒ†ãƒ¼ãƒã¨çµæœã®æ•´åˆæ€§ç¢ºèª

### äº’æ›æ€§ãƒ†ã‚¹ãƒˆ
- æ—¢å­˜ã®ãƒ†ãƒ¼ãƒå…¥åŠ›æ©Ÿèƒ½ãŒå‹•ä½œã™ã‚‹ã‹ç¢ºèª
- å†ç”Ÿæˆæ©Ÿèƒ½ãŒå‹•ä½œã™ã‚‹ã‹ç¢ºèª
