# Bolt Plan - PokeParty

## 概要

MVPを4つのUnitに分割し、段階的に開発を進める。
各Unitは独立してデプロイ可能な単位とする。

---

## Unit 構成

```
Unit 1: 基盤構築 & PokeAPI統合
    ↓
Unit 2: AI パーティ生成
    ↓
Unit 3: バトル補助（相性判定）
    ↓
Unit 4: UI/UX 改善 & 仕上げ
```

---

## Unit 1: 基盤構築 & PokeAPI統合

### 目的
Next.jsプロジェクトのセットアップとPokeAPIからのデータ取得基盤を構築

### 対応ストーリー
- US-3（パーティ確認）の基盤
- US-7（スマホUI）の基盤

### 成果物
- Next.js プロジェクト初期構築（TypeScript, Tailwind CSS）
- PokeAPI クライアント実装
- ポケモンデータ取得（日本語名、タイプ、画像）
- 技データ取得（日本語名、タイプ、分類）
- 習得可能技リスト取得
- 基本UIコンポーネント（カード、ボタン等）
- Vercel デプロイ設定

### Bolt（実装タスク）

| Bolt | タスク | 詳細 |
|------|--------|------|
| 1-1 | プロジェクト初期化 | Next.js + TypeScript + Tailwind CSS |
| 1-2 | PokeAPI調査 | 日本語データの取得方法・品質確認（RISK-1対応） |
| 1-3 | API クライアント | ポケモン・技データ取得関数 |
| 1-4 | 型定義 | Pokemon, Move, Type の型定義 |
| 1-5 | 基本UI | レイアウト、カードコンポーネント |
| 1-6 | ポケモン表示 | 単体ポケモンの情報表示（名前、タイプ、画像、技） |
| 1-7 | デプロイ | Vercel 連携・初回デプロイ |

### 完了条件
- [ ] PokeAPIから日本語名でポケモン情報を取得できる
- [ ] ポケモンカードがスマホで見やすく表示される
- [ ] Vercelにデプロイされている

---

## Unit 2: AI パーティ生成

### 目的
テーマを入力してAIがパーティを生成する中核機能を実装

### 対応ストーリー
- US-1（テーマ指定でパーティ生成）
- US-2（匹数指定）
- US-4（再生成）

### 成果物
- テーマ入力UI
- 匹数選択UI
- OpenAI API 統合
- パーティ生成ロジック（AI → PokeAPIバリデーション）
- 技選定ロジック（習得可能技からバランス選定）
- パーティ表示UI

### Bolt（実装タスク）

| Bolt | タスク | 詳細 |
|------|--------|------|
| 2-1 | 入力UI | テーマ入力欄、匹数セレクト、生成ボタン |
| 2-2 | OpenAI統合 | API Route でOpenAI呼び出し（APIキー保護） |
| 2-3 | プロンプト設計 | テーマ→ポケモン名リスト生成のプロンプト |
| 2-4 | バリデーション | AI応答をPokeAPIで検証（実在確認）（RISK-3対応） |
| 2-5 | 技選定 | 習得可能技からバランス良く4つ選定 |
| 2-6 | パーティ表示 | 生成されたパーティ一覧表示 |
| 2-7 | 再生成 | 再生成ボタン実装 |
| 2-8 | ローディング/エラー | 生成中表示、エラーハンドリング |

### 完了条件
- [ ] テーマを入力してパーティが生成される
- [ ] 1〜6匹の範囲で匹数指定できる
- [ ] 生成されたポケモンは実在し、技も習得可能なもの
- [ ] 再生成ができる

---

## Unit 3: バトル補助（相性判定）

### 目的
ごっこ遊び中に「こうかはばつぐんだ！」を正しく言えるように

### 対応ストーリー
- US-5（タイプ相性確認）
- US-6（技の詳細確認）

### 成果物
- タイプ相性計算ロジック
- 相性判定UI
- 技詳細モーダル

### Bolt（実装タスク）

| Bolt | タスク | 詳細 |
|------|--------|------|
| 3-1 | 相性データ | タイプ相性表（18タイプ × 18タイプ） |
| 3-2 | 相性計算 | 攻撃タイプ × 防御タイプ(複合対応) → 倍率 |
| 3-3 | 相性UI | 技タップ → 相手タイプ選択 → 結果表示 |
| 3-4 | 結果表示 | 「ばつぐん！」「いまひとつ」等の表示 |
| 3-5 | 技詳細 | 技タップで詳細モーダル表示 |

### 完了条件
- [ ] 技と相手タイプから相性結果がわかる
- [ ] 複合タイプ（2つ持ち）にも対応
- [ ] 技の詳細が確認できる

---

## Unit 4: UI/UX 改善 & 仕上げ

### 目的
実際の利用シーンを想定したUI改善と全体の仕上げ

### 対応ストーリー
- US-7（スマホ最適化）
- US-8（情報への素早いアクセス）

### 成果物
- テーマ例・おすすめボタン（RISK-8対応）
- ポケモン切り替えUI改善
- パフォーマンス最適化
- 最終テスト・バグ修正

### Bolt（実装タスク）

| Bolt | タスク | 詳細 |
|------|--------|------|
| 4-1 | テーマ例 | プレースホルダー、おすすめボタン |
| 4-2 | ポケモン切り替え | タブ or スワイプでポケモン切り替え |
| 4-3 | 視認性改善 | コントラスト、フォントサイズ調整 |
| 4-4 | パフォーマンス | 画像最適化、不要な再レンダリング削減 |
| 4-5 | テスト | 実機テスト、エッジケース確認 |
| 4-6 | バグ修正 | 発見された問題の修正 |

### 完了条件
- [ ] テーマ入力に迷わない
- [ ] ごっこ遊び中にスムーズに操作できる
- [ ] Lighthouse Performance 80以上

---

## 開発順序とマイルストーン

```
[Unit 1] 基盤構築
    │
    ▼ マイルストーン: ポケモン1匹が表示される
    │
[Unit 2] パーティ生成
    │
    ▼ マイルストーン: テーマからパーティ生成できる（MVP Core）
    │
[Unit 3] 相性判定
    │
    ▼ マイルストーン: 相性がわかる
    │
[Unit 4] 仕上げ
    │
    ▼ マイルストーン: MVP完成
```

---

## 技術スタック詳細

| レイヤー | 技術 |
|----------|------|
| Framework | Next.js 14 (App Router) |
| Language | TypeScript (strict mode) |
| Styling | Tailwind CSS |
| API | PokeAPI (REST), OpenAI API |
| Hosting | Vercel |
| State | React useState / useReducer |

---

## リスク対応の組み込み

| リスク | 対応Unit/Bolt |
|--------|---------------|
| RISK-1（日本語データ） | Unit 1 / Bolt 1-2 で事前検証 |
| RISK-3（存在しない技） | Unit 2 / Bolt 2-4, 2-5 でPokeAPI検証 |
| RISK-8（テーマ迷い） | Unit 4 / Bolt 4-1 でテーマ例提示 |
