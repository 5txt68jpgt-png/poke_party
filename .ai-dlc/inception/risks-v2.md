# リスク分析: ダブルバトル専用モード

## R-1: AIがダブル向け技を適切に選べない

| 項目 | 内容 |
|------|------|
| 影響度 | 高 |
| 発生確率 | 中 |
| 説明 | ダブルバトルの戦術は複雑で、AIが適切なシナジーを理解できない可能性 |
| 軽減策 | プロンプトに具体的なダブル戦術例を記載、定番コンボを明示的に指示 |
| 対応策 | 生成結果が不適切な場合はプロンプト調整で改善 |

---

## R-2: 味方巻き込み技の判定漏れ

| 項目 | 内容 |
|------|------|
| 影響度 | 中 |
| 発生確率 | 中 |
| 説明 | 味方に当たる技のリストが不完全で、表示漏れが発生する可能性 |
| 軽減策 | PokeAPIから技の対象範囲データを取得、手動リストとの併用 |
| 対応策 | ユーザーからのフィードバックで随時追加 |

---

## R-3: タブUIによる操作混乱

| 項目 | 内容 |
|------|------|
| 影響度 | 低 |
| 発生確率 | 低 |
| 説明 | ユーザーがモードを誤認したまま生成してしまう |
| 軽減策 | 選択中タブを明確に強調、生成ボタンにモード名を含める |
| 対応策 | 生成結果画面にもモード表示を追加 |

---

## R-4: ポケモン数選択UIの複雑化

| 項目 | 内容 |
|------|------|
| 影響度 | 低 |
| 発生確率 | 中 |
| 説明 | シングルとダブルで選択肢が異なり、UIが複雑になる |
| 軽減策 | モードに応じて選択肢を動的に切り替え |
| 対応策 | ユーザーテストで使いやすさを検証 |

---

## R-5: 既存機能への影響

| 項目 | 内容 |
|------|------|
| 影響度 | 高 |
| 発生確率 | 低 |
| 説明 | 新機能追加により既存のシングルモードが壊れる |
| 軽減策 | モードを分離した設計、既存コードへの変更を最小限に |
| 対応策 | 各Bolt後に既存機能のリグレッションテスト |

---

## R-6: プロンプト肥大化によるAPI制限

| 項目 | 内容 |
|------|------|
| 影響度 | 中 |
| 発生確率 | 低 |
| 説明 | ダブル用の詳細なプロンプトでトークン消費が増加 |
| 軽減策 | プロンプトを簡潔に保つ、必要最小限の指示に絞る |
| 対応策 | 制限に達した場合はプロンプト最適化 |

---

## リスクマトリクス

```
影響度 ↑
  高  | R-5      | R-1      |          |
  中  |          | R-2, R-6 |          |
  低  | R-4      | R-3      |          |
      +----------+----------+----------+
         低         中         高
                         発生確率 →
```

## 優先対応リスク
1. **R-1**: プロンプト設計時に重点対応
2. **R-5**: 設計・実装時に常に意識
3. **R-2**: 技データ整備時に対応
